<% layout('cms/boilerplate')%>

<div class="posts">
  <h2 class="mt-3 mb-4">All Posts</h2>
  <% if (posts.length === 0) { %>
    <h4> There are no posts.</h4>
  <% } %>
  <% for (let i=posts.length-1; i>=0; i--) { %> 
    <div class="card card-body w-75 d-flex mb-3">
      <div class="row">
        <h5 class="card-title col-sm-12 col-lg-8"> <%= posts[i].title %> </h5>
                  
        <form class="col-sm-5 col-lg-2" action="/admin/edit/<%= posts[i]._id %>" method="GET">
          <button class="btn btn-primary d-flex flex-nowrap justify-content-center col-12" id="delBtn">Edit</button>
        </form>

        <form class="col-sm-5 offset-sm-2 offset-lg-0 col-lg-2" action="/posts/<%=posts[i]._id%>?_method=DELETE" method="POST">
          <button class="btn btn-danger d-flex flex-nowrap justify-content-center col-12" id="delBtn">Delete</button>
        </form>
        <% const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']; %> 
        <p class="col-12 text-muted" id="date"> Created <%= months[posts[i].createdAt.getMonth()] %> <%= posts[i].createdAt.getDate() %>, <%= posts[i].createdAt.getHours() %>:<%= posts[i].createdAt.getMinutes() %> </p>
      </div>
    </div>
  <% } %> 
</div>
    
    